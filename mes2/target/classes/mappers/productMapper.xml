<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <!-- produceMapper.xml -->
  
<mapper namespace="com.mes2.mapper.ProductMapper">
	
	<select id="getTime" resultType="string">
		select now()
	</select>
	
	<insert id="insertProduct">
		insert into product (pd_lot,pd_mdp_code, pd_quantity, pd_period, pd_date, pd_soi_id, pd_qc_result, pd_count)
		value(#{pd_lot},#{pd_mdp_code},#{pd_quantity},#{pd_period},#{pd_date},#{pd_soi_id},#{pd_qc_result},#{pd_count})
	</insert>

	<select id="selectByLot" resultType="com.mes2.production.domain.ProductDTO">
		select * from product
		where pd_lot = #{pd_lot}
	</select>
	
	
	<select id="selectBySearch" resultType="com.mes2.production.domain.ProductDTO" >
        select * from product
		
		<where>
            <if test="name !=null and !name.equals('')">
                and pd_mdp_code like concat('%',#{name},'%')
            </if>
           
            <if test="startDate != null  and endDate != null ">
                AND pd_date BETWEEN #{startDate} AND #{endDate}
            </if>	
          <!--  
            <if test="!startDate.equals('')  and !endDate.equals('') ">
                AND pd_date BETWEEN #{startDate} AND #{endDate}
            </if>	
             -->
         </where>

	</select>
<!-- 	
	<delete id="deleteProduct" parameterType="java.util.list">
		delete from product
		<where>
			<if test="list.size()>=1" >
				<foreach collection="list" item="productList" separator=",">
					pd_lot = #{pd_lot} , pd_mdp_code = #{pd_mdp_code}
				</foreach>
			</if>
		</where>
	
	</delete>
 -->
</mapper>